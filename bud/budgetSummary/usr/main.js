_builtInTemplate_99c0f840 = ['<?xml version="1.0" encoding="utf-8"?><transmission>	<target id="iiCache" requestId="5">		<store id="houseCodeJobs" activeId="169" criteria="storeId:houseCodeJobs,houseCodeId:286,userId:[user],">			<item fscAccount="169" fscAccCode="4005" description="Full Service Billings" period1="0" period2="0" period3="0"  period4="0" period5="0" period6="0" period7="0" period8="0" period9="0" period10="0" period11="0" period12="0" period13="0"  period14="0" period15="0" period16="0" />			<item fscAccount="170" fscAccCode="4010" description="Management Fee Billings" period1="0" period2="0" period3="0"  period4="0" period5="0" period6="0" period7="0" period8="0" period9="0" period10="0" period11="0" period12="0" period13="0"  period14="0" period15="0" period16="0" />			<item fscAccount="171" fscAccCode="4015" description="Client Paid Labor" period1="0" period2="0" period3="0"  period4="0" period5="0" period6="0" period7="0" period8="0" period9="0" period10="0" period11="0" period12="0" period13="0"  period14="0" period15="0" period16="0" />			<item fscAccount="172" fscAccCode="4020" description="Miscellaneous Income" period1="0" period2="0" period3="0"  period4="0" period5="0" period6="0" period7="0" period8="0" period9="0" period10="0" period11="0" period12="0" period13="0"  period14="0" period15="0" period16="0" />			<item fscAccount="173" fscAccCode="4030" description="Reimbursement Start-Up Costs" period1="0" period2="0" period3="0"  period4="0" period5="0" period6="0" period7="0" period8="0" period9="0" period10="0" period11="0" period12="0" period13="0"  period14="0" period15="0" period16="0" />			<item fscAccount="174" fscAccCode="4040" description="Reimbursement Direct Costs" period1="0" period2="0" period3="0"  period4="0" period5="0" period6="0" period7="0" period8="0" period9="0" period10="0" period11="0" period12="0" period13="0"  period14="0" period15="0" period16="0" />			<item fscAccount="175" fscAccCode="4050" description="Reimbursement Equipment" period1="0" period2="0" period3="0"  period4="0" period5="0" period6="0" period7="0" period8="0" period9="0" period10="0" period11="0" period12="0" period13="0"  period14="0" period15="0" period16="0" />			<item fscAccount="176" fscAccCode="4060" description="Quality Incentive Income" period1="0" period2="0" period3="0"  period4="0" period5="0" period6="0" period7="0" period8="0" period9="0" period10="0" period11="0" period12="0" period13="0"  period14="0" period15="0" period16="0" />			<item fscAccount="177" fscAccCode="4070" description="Prepayment Discount" period1="0" period2="0" period3="0"  period4="0" period5="0" period6="0" period7="0" period8="0" period9="0" period10="0" period11="0" period12="0" period13="0"  period14="0" period15="0" period16="0" />			<item fscAccount="178" fscAccCode="4080" description="Financial Incentive Reimb" period1="0" period2="0" period3="0"  period4="0" period5="0" period6="0" period7="0" period8="0" period9="0" period10="0" period11="0" period12="0" period13="0"  period14="0" period15="0" period16="0" />			<item fscAccount="179" fscAccCode="4085" description="Standard Hours Income" period1="0" period2="0" period3="0"  period4="0" period5="0" period6="0" period7="0" period8="0" period9="0" period10="0" period11="0" period12="0" period13="0"  period14="0" period15="0" period16="0" />			<item fscAccount="180" fscAccCode="4090" description="Control Account Income" period1="0" period2="0" period3="0"  period4="0" period5="0" period6="0" period7="0" period8="0" period9="0" period10="0" period11="0" period12="0" period13="0"  period14="0" period15="0" period16="0" />			<item fscAccount="181" fscAccCode="4095" description="Financial Incentive Income" period1="0" period2="0" period3="0"  period4="0" period5="0" period6="0" period7="0" period8="0" period9="0" period10="0" period11="0" period12="0" period13="0"  period14="0" period15="0" period16="0" />			</store>	</target></transmission>','<?xml version="1.0" encoding="utf-8" ?><transmission>	<target id="iiCache" requestId="5">		<store id="houseCodeJobs" activeId="1036" criteria="storeId:houseCodeJobs,houseCodeId:286,userId:[user],">			<item id="126" fiscalYear="2010" period="1" startDate="2009-09-27 00:00:00" endDate="2009-10-24 00:00:00"/>			<item id="127" fiscalYear="2010" period="2" startDate="2009-10-25 00:00:00" endDate="2009-11-21 00:00:00"/>			<item id="128" fiscalYear="2010" period="3" startDate="2009-11-22 00:00:00" endDate="2009-12-19 00:00:00"/>			<item id="129" fiscalYear="2010" period="4" startDate="2009-12-20 00:00:00" endDate="2010-01-16 00:00:00"/>			<item id="130" fiscalYear="2010" period="5" startDate="2010-01-17 00:00:00" endDate="2010-02-13 00:00:00"/>			<item id="131" fiscalYear="2010" period="6" startDate="2010-02-14 00:00:00" endDate="2010-03-13 00:00:00"/>			<item id="132" fiscalYear="2010" period="7" startDate="2010-03-14 00:00:00" endDate="2010-04-10 00:00:00"/>			<item id="133" fiscalYear="2010" period="8" startDate="2010-04-11 00:00:00" endDate="2010-05-08 00:00:00"/>			<item id="134" fiscalYear="2010" period="9" startDate="2010-05-09 00:00:00" endDate="2010-06-05 00:00:00"/>			<item id="135" fiscalYear="2010" period="10" startDate="2010-06-06 00:00:00" endDate="2010-07-03 00:00:00"/>			<item id="136" fiscalYear="2010" period="11" startDate="2010-07-04 00:00:00" endDate="2010-07-31 00:00:00"/>			<item id="137" fiscalYear="2010" period="12" startDate="2010-08-01 00:00:00" endDate="2010-08-28 00:00:00"/>			<item id="138" fiscalYear="2010" period="13" startDate="2010-08-29 00:00:00" endDate="2010-09-25 23:59:00"/>		</store>	</target></transmission>','<?xml version="1.0" encoding="utf-8"?><transmission>	<target id="iiCache" requestId="5">		<store id="shiftTypes" activeId="169" criteria="storeId:houseCodeJobs,houseCodeId:286,userId:[user],">			<item id="1" title="Day" />			<item id="2" title="Evening" />			<item id="3" title="Night" />		</store>	</target></transmission>','<?xml version="1.0" encoding="utf-8"?><transmission>  <target id="iiCache" requestId="5">    <store id="houseCodeJobs" activeId="169" criteria="storeId:houseCodeJobs,houseCodeId:286,userId:[user],">      <item id="101" fullname="Jackson, Bo" yearOfService="1" vacationDays="0" dueIncrease="0" baseWageRate="7.75" differentialPayRate="1" otherPayRate="3" totalCurrentWageRatePerHour="7.75" hoursWorkedPerPayPeriod="60" costPerPayPeriod="465.00" costBeforeDifferential="465.00" fscPeriodOfIncrease="0" typeMeritPromotion="A" fiscalIncrease="0" mritIncrease="0" lastIncreaseDate="2010-02-14 00:00:00" annual="12090.00" position="Director Of BOH" annualSalary="0" newSalary="0" period1="0" period2="0" period3="0"  period4="0" period5="0" period6="0" period7="0" period8="0" period9="0" period10="0" period11="1" period12="0" period13="0" />      <item id="102" fullname="Simpson, Bo" yearOfService="2" vacationDays="1" dueIncrease="0" baseWageRate="10.00" differentialPayRate="3" otherPayRate="9" totalCurrentWageRatePerHour="10.00" hoursWorkedPerPayPeriod="80" costPerPayPeriod="800.00" costBeforeDifferential="800.00" fscPeriodOfIncrease="0" typeMeritPromotion="B" fiscalIncrease="0" mritIncrease="0" lastIncreaseDate="2010-02-14 00:00:00" annual="20800.00" position="Director Of BOH" annualSalary="0" newSalary="0" period1="0" period2="0" period3="0"  period4="0" period5="0" period6="0" period7="0" period8="0" period9="5" period10="0" period11="0" period12="0" period13="0" />      <item id="103" fullname="Simpson, Homer" yearOfService="3" vacationDays="2" dueIncrease="0" baseWageRate="2.00" differentialPayRate="8" otherPayRate="2" totalCurrentWageRatePerHour="2.00" hoursWorkedPerPayPeriod="80" costPerPayPeriod="160.00" costBeforeDifferential="160.00" fscPeriodOfIncrease="0" typeMeritPromotion="C" fiscalIncrease="0" mritIncrease="0" lastIncreaseDate="2010-02-14 00:00:00" annual="4160.00"  position="Director Of BOH" annualSalary="0" newSalary="0" period1="0" period2="0" period3="0"  period4="0" period5="0" period6="7" period7="0" period8="0" period9="0" period10="0" period11="0" period12="0" period13="0" />      <item id="1043" fullname="Simpson, Homer" yearOfService="3" vacationDays="2" dueIncrease="0" baseWageRate="2.00" differentialPayRate="2" otherPayRate="4" totalCurrentWageRatePerHour="2.00" hoursWorkedPerPayPeriod="80" costPerPayPeriod="160.00" costBeforeDifferential="160.00" fscPeriodOfIncrease="0" typeMeritPromotion="D" fiscalIncrease="0" mritIncrease="0" lastIncreaseDate="2010-02-14 00:00:00" annual="4160.00" position="Director Of BOH" annualSalary="0" newSalary="0"  period1="0" period2="0" period3="0"  period4="0" period5="0" period6="6" period7="0" period8="7" period9="0" period10="0" period11="2" period12="0" period13="7" />    </store>  </target></transmission>','<h1 class="page-title">Budget Summary</h1> <div id="container"></div>'];

Ext.ns('Ext.ux.grid');

Ext.ux.grid.ColumnHeaderGroup = Ext.extend(Ext.util.Observable, {

    constructor: function(config){
        this.config = config;
    },

    init: function(grid){
        Ext.applyIf(grid.colModel, this.config);
        Ext.apply(grid.getView(), this.viewConfig);
    },

    viewConfig: {
        initTemplates: function(){
            this.constructor.prototype.initTemplates.apply(this, arguments);
            var ts = this.templates || {};
            if(!ts.gcell){
                ts.gcell = new Ext.XTemplate('<td class="x-grid3-hd x-grid3-gcell x-grid3-td-{id} ux-grid-hd-group-row-{row} {cls}" style="{style}">', '<div {tooltip} class="x-grid3-hd-inner x-grid3-hd-{id}" unselectable="on" style="{istyle}">', this.grid.enableHdMenu ? '<a class="x-grid3-hd-btn" href="#"></a>' : '', '{value}</div></td>');
            }
            this.templates = ts;
            this.hrowRe = new RegExp("ux-grid-hd-group-row-(\\d+)", "");
        },

        renderHeaders: function(){
            var ts = this.templates, headers = [], cm = this.cm, rows = cm.rows, tstyle = 'width:' + this.getTotalWidth() + ';';

            for(var row = 0, rlen = rows.length; row < rlen; row++){
                var r = rows[row], cells = [];
                for(var i = 0, gcol = 0, len = r.length; i < len; i++){
                    var group = r[i];
                    group.colspan = group.colspan || 1;
                    var id = this.getColumnId(group.dataIndex ? cm.findColumnIndex(group.dataIndex) : gcol), gs = Ext.ux.grid.ColumnHeaderGroup.prototype.getGroupStyle.call(this, group, gcol);
                    cells[i] = ts.gcell.apply({
                        cls: 'ux-grid-hd-group-cell',
                        id: id,
                        row: row,
                        style: 'width:' + gs.width + ';' + (gs.hidden ? 'display:none;' : '') + (group.align ? 'text-align:' + group.align + ';' : ''),
                        tooltip: group.tooltip ? (Ext.QuickTips.isEnabled() ? 'ext:qtip' : 'title') + '="' + group.tooltip + '"' : '',
                        istyle: group.align == 'right' ? 'padding-right:16px' : '',
                        btn: this.grid.enableHdMenu && group.header,
                        value: group.header || '&nbsp;'
                    });
                    gcol += group.colspan;
                }
                headers[row] = ts.header.apply({
                    tstyle: tstyle,
                    cells: cells.join('')
                });
            }
            headers.push(this.constructor.prototype.renderHeaders.apply(this, arguments));
            return headers.join('');
        },

        onColumnWidthUpdated: function(){
            this.constructor.prototype.onColumnWidthUpdated.apply(this, arguments);
            Ext.ux.grid.ColumnHeaderGroup.prototype.updateGroupStyles.call(this);
        },

        onAllColumnWidthsUpdated: function(){
            this.constructor.prototype.onAllColumnWidthsUpdated.apply(this, arguments);
            Ext.ux.grid.ColumnHeaderGroup.prototype.updateGroupStyles.call(this);
        },

        onColumnHiddenUpdated: function(){
            this.constructor.prototype.onColumnHiddenUpdated.apply(this, arguments);
            Ext.ux.grid.ColumnHeaderGroup.prototype.updateGroupStyles.call(this);
        },

        getHeaderCell: function(index){
            return this.mainHd.query(this.cellSelector)[index];
        },

        findHeaderCell: function(el){
            return el ? this.fly(el).findParent('td.x-grid3-hd', this.cellSelectorDepth) : false;
        },

        findHeaderIndex: function(el){
            var cell = this.findHeaderCell(el);
            return cell ? this.getCellIndex(cell) : false;
        },

        updateSortIcon: function(col, dir){
            var sc = this.sortClasses, hds = this.mainHd.select(this.cellSelector).removeClass(sc);
            hds.item(col).addClass(sc[dir == "DESC" ? 1 : 0]);
        },

        handleHdDown: function(e, t){
            var el = Ext.get(t);
            if(el.hasClass('x-grid3-hd-btn')){
                e.stopEvent();
                var hd = this.findHeaderCell(t);
                Ext.fly(hd).addClass('x-grid3-hd-menu-open');
                var index = this.getCellIndex(hd);
                this.hdCtxIndex = index;
                var ms = this.hmenu.items, cm = this.cm;
                ms.get('asc').setDisabled(!cm.isSortable(index));
                ms.get('desc').setDisabled(!cm.isSortable(index));
                this.hmenu.on('hide', function(){
                    Ext.fly(hd).removeClass('x-grid3-hd-menu-open');
                }, this, {
                    single: true
                });
                this.hmenu.show(t, 'tl-bl?');
            }else if(el.hasClass('ux-grid-hd-group-cell') || Ext.fly(t).up('.ux-grid-hd-group-cell')){
                e.stopEvent();
            }
        },

        handleHdMove: function(e, t){
            var hd = this.findHeaderCell(this.activeHdRef);
            if(hd && !this.headersDisabled && !Ext.fly(hd).hasClass('ux-grid-hd-group-cell')){
                var hw = this.splitHandleWidth || 5, r = this.activeHdRegion, x = e.getPageX(), ss = hd.style, cur = '';
                if(this.grid.enableColumnResize !== false){
                    if(x - r.left <= hw && this.cm.isResizable(this.activeHdIndex - 1)){
                        cur = Ext.isAir ? 'move' : Ext.isWebKit ? 'e-resize' : 'col-resize'; // col-resize
                                                                                                // not
                                                                                                // always
                                                                                                // supported
                    }else if(r.right - x <= (!this.activeHdBtn ? hw : 2) && this.cm.isResizable(this.activeHdIndex)){
                        cur = Ext.isAir ? 'move' : Ext.isWebKit ? 'w-resize' : 'col-resize';
                    }
                }
                ss.cursor = cur;
            }
        },

        handleHdOver: function(e, t){
            var hd = this.findHeaderCell(t);
            if(hd && !this.headersDisabled){
                this.activeHdRef = t;
                this.activeHdIndex = this.getCellIndex(hd);
                var fly = this.fly(hd);
                this.activeHdRegion = fly.getRegion();
                if(!(this.cm.isMenuDisabled(this.activeHdIndex) || fly.hasClass('ux-grid-hd-group-cell'))){
                    fly.addClass('x-grid3-hd-over');
                    this.activeHdBtn = fly.child('.x-grid3-hd-btn');
                    if(this.activeHdBtn){
                        this.activeHdBtn.dom.style.height = (hd.firstChild.offsetHeight - 1) + 'px';
                    }
                }
            }
        },

        handleHdOut: function(e, t){
            var hd = this.findHeaderCell(t);
            if(hd && (!Ext.isIE || !e.within(hd, true))){
                this.activeHdRef = null;
                this.fly(hd).removeClass('x-grid3-hd-over');
                hd.style.cursor = '';
            }
        },

        handleHdMenuClick: function(item){
            var index = this.hdCtxIndex, cm = this.cm, ds = this.ds, id = item.getItemId();
            switch(id){
                case 'asc':
                    ds.sort(cm.getDataIndex(index), 'ASC');
                    break;
                case 'desc':
                    ds.sort(cm.getDataIndex(index), 'DESC');
                    break;
                default:
                    if(id.substr(0, 5) == 'group'){
                        var i = id.split('-'), row = parseInt(i[1], 10), col = parseInt(i[2], 10), r = this.cm.rows[row], group, gcol = 0;
                        for(var i = 0, len = r.length; i < len; i++){
                            group = r[i];
                            if(col >= gcol && col < gcol + group.colspan){
                                break;
                            }
                            gcol += group.colspan;
                        }
                        if(item.checked){
                            var max = cm.getColumnsBy(this.isHideableColumn, this).length;
                            for(var i = gcol, len = gcol + group.colspan; i < len; i++){
                                if(!cm.isHidden(i)){
                                    max--;
                                }
                            }
                            if(max < 1){
                                this.onDenyColumnHide();
                                return false;
                            }
                        }
                        for(var i = gcol, len = gcol + group.colspan; i < len; i++){
                            if(cm.config[i].fixed !== true && cm.config[i].hideable !== false){
                                cm.setHidden(i, item.checked);
                            }
                        }
                    }else{
                        index = cm.getIndexById(id.substr(4));
                        if(index != -1){
                            if(item.checked && cm.getColumnsBy(this.isHideableColumn, this).length <= 1){
                                this.onDenyColumnHide();
                                return false;
                            }
                            cm.setHidden(index, item.checked);
                        }
                    }
                    item.checked = !item.checked;
                    if(item.menu){
                        var updateChildren = function(menu){
                            menu.items.each(function(childItem){
                                if(!childItem.disabled){
                                    childItem.setChecked(item.checked, false);
                                    if(childItem.menu){
                                        updateChildren(childItem.menu);
                                    }
                                }
                            });
                        }
                        updateChildren(item.menu);
                    }
                    var parentMenu = item, parentItem;
                    while(parentMenu = parentMenu.parentMenu){
                        if(!parentMenu.parentMenu || !(parentItem = parentMenu.parentMenu.items.get(parentMenu.getItemId())) || !parentItem.setChecked){
                            break;
                        }
                        var checked = parentMenu.items.findIndexBy(function(m){
                            return m.checked;
                        }) >= 0;
                        parentItem.setChecked(checked, true);
                    }
                    item.checked = !item.checked;
            }
            return true;
        },

        beforeColMenuShow: function(){
            var cm = this.cm, rows = this.cm.rows;
            this.colMenu.removeAll();
            for(var col = 0, clen = cm.getColumnCount(); col < clen; col++){
                var menu = this.colMenu, title = cm.getColumnHeader(col), text = [];
                if(cm.config[col].fixed !== true && cm.config[col].hideable !== false){
                    for(var row = 0, rlen = rows.length; row < rlen; row++){
                        var r = rows[row], group, gcol = 0;
                        for(var i = 0, len = r.length; i < len; i++){
                            group = r[i];
                            if(col >= gcol && col < gcol + group.colspan){
                                break;
                            }
                            gcol += group.colspan;
                        }
                        if(group && group.header){
                            if(cm.hierarchicalColMenu){
                                var gid = 'group-' + row + '-' + gcol;
                                var item = menu.items.item(gid);
                                var submenu = item ? item.menu : null;
                                if(!submenu){
                                    submenu = new Ext.menu.Menu({
                                        itemId: gid
                                    });
                                    submenu.on("itemclick", this.handleHdMenuClick, this);
                                    var checked = false, disabled = true;
                                    for(var c = gcol, lc = gcol + group.colspan; c < lc; c++){
                                        if(!cm.isHidden(c)){
                                            checked = true;
                                        }
                                        if(cm.config[c].hideable !== false){
                                            disabled = false;
                                        }
                                    }
                                    menu.add({
                                        itemId: gid,
                                        text: group.header,
                                        menu: submenu,
                                        hideOnClick: false,
                                        checked: checked,
                                        disabled: disabled
                                    });
                                }
                                menu = submenu;
                            }else{
                                text.push(group.header);
                            }
                        }
                    }
                    text.push(title);
                    menu.add(new Ext.menu.CheckItem({
                        itemId: "col-" + cm.getColumnId(col),
                        text: text.join(' '),
                        checked: !cm.isHidden(col),
                        hideOnClick: false,
                        disabled: cm.config[col].hideable === false
                    }));
                }
            }
        },

        renderUI: function(){
            this.constructor.prototype.renderUI.apply(this, arguments);
            Ext.apply(this.columnDrop, Ext.ux.grid.ColumnHeaderGroup.prototype.columnDropConfig);
            Ext.apply(this.splitZone, Ext.ux.grid.ColumnHeaderGroup.prototype.splitZoneConfig);
        }
    },

    splitZoneConfig: {
        allowHeaderDrag: function(e){
            return !e.getTarget(null, null, true).hasClass('ux-grid-hd-group-cell');
        }
    },

    columnDropConfig: {
        getTargetFromEvent: function(e){
            var t = Ext.lib.Event.getTarget(e);
            return this.view.findHeaderCell(t);
        },

        positionIndicator: function(h, n, e){
            var data = Ext.ux.grid.ColumnHeaderGroup.prototype.getDragDropData.call(this, h, n, e);
            if(data === false){
                return false;
            }
            var px = data.px + this.proxyOffsets[0];
            this.proxyTop.setLeftTop(px, data.r.top + this.proxyOffsets[1]);
            this.proxyTop.show();
            this.proxyBottom.setLeftTop(px, data.r.bottom);
            this.proxyBottom.show();
            return data.pt;
        },

        onNodeDrop: function(n, dd, e, data){
            var h = data.header;
            if(h != n){
                var d = Ext.ux.grid.ColumnHeaderGroup.prototype.getDragDropData.call(this, h, n, e);
                if(d === false){
                    return false;
                }
                var cm = this.grid.colModel, right = d.oldIndex < d.newIndex, rows = cm.rows;
                for(var row = d.row, rlen = rows.length; row < rlen; row++){
                    var r = rows[row], len = r.length, fromIx = 0, span = 1, toIx = len;
                    for(var i = 0, gcol = 0; i < len; i++){
                        var group = r[i];
                        if(d.oldIndex >= gcol && d.oldIndex < gcol + group.colspan){
                            fromIx = i;
                        }
                        if(d.oldIndex + d.colspan - 1 >= gcol && d.oldIndex + d.colspan - 1 < gcol + group.colspan){
                            span = i - fromIx + 1;
                        }
                        if(d.newIndex >= gcol && d.newIndex < gcol + group.colspan){
                            toIx = i;
                        }
                        gcol += group.colspan;
                    }
                    var groups = r.splice(fromIx, span);
                    rows[row] = r.splice(0, toIx - (right ? span : 0)).concat(groups).concat(r);
                }
                for(var c = 0; c < d.colspan; c++){
                    var oldIx = d.oldIndex + (right ? 0 : c), newIx = d.newIndex + (right ? -1 : c);
                    cm.moveColumn(oldIx, newIx);
                    this.grid.fireEvent("columnmove", oldIx, newIx);
                }
                return true;
            }
            return false;
        }
    },

    getGroupStyle: function(group, gcol){
        var width = 0, hidden = true;
        for(var i = gcol, len = gcol + group.colspan; i < len; i++){
            if(!this.cm.isHidden(i)){
                var cw = this.cm.getColumnWidth(i);
                if(typeof cw == 'number'){
                    width += cw;
                }
                hidden = false;
            }
        }
        return {
            width: (Ext.isBorderBox || (Ext.isWebKit && !Ext.isSafari2) ? width : Math.max(width - this.borderWidth, 0)) + 'px',
            hidden: hidden
        };
    },

    updateGroupStyles: function(col){
        var tables = this.mainHd.query('.x-grid3-header-offset > table'), tw = this.getTotalWidth(), rows = this.cm.rows;
        for(var row = 0; row < tables.length; row++){
            tables[row].style.width = tw;
            if(row < rows.length){
                var cells = tables[row].firstChild.firstChild.childNodes;
                for(var i = 0, gcol = 0; i < cells.length; i++){
                    var group = rows[row][i];
                    if((typeof col != 'number') || (col >= gcol && col < gcol + group.colspan)){
                        var gs = Ext.ux.grid.ColumnHeaderGroup.prototype.getGroupStyle.call(this, group, gcol);
                        cells[i].style.width = gs.width;
                        cells[i].style.display = gs.hidden ? 'none' : '';
                    }
                    gcol += group.colspan;
                }
            }
        }
    },

    getGroupRowIndex: function(el){
        if(el){
            var m = el.className.match(this.hrowRe);
            if(m && m[1]){
                return parseInt(m[1], 10);
            }
        }
        return this.cm.rows.length;
    },

    getGroupSpan: function(row, col){
        if(row < 0){
            return {
                col: 0,
                colspan: this.cm.getColumnCount()
            };
        }
        var r = this.cm.rows[row];
        if(r){
            for(var i = 0, gcol = 0, len = r.length; i < len; i++){
                var group = r[i];
                if(col >= gcol && col < gcol + group.colspan){
                    return {
                        col: gcol,
                        colspan: group.colspan
                    };
                }
                gcol += group.colspan;
            }
            return {
                col: gcol,
                colspan: 0
            };
        }
        return {
            col: col,
            colspan: 1
        };
    }
});



Ext.ux.Printer = function () {

    return {
        /**
        * @property renderers
        * @type Object
        * An object in the form {xtype: RendererClass} which is manages the renderers registered by xtype
        */
        renderers: {},

        /**
        * Registers a renderer function to handle components of a given xtype
        * @param {String} xtype The component xtype the renderer will handle
        * @param {Function} renderer The renderer to invoke for components of this xtype
        */
        registerRenderer: function (xtype, renderer) {
            this.renderers[xtype] = new (renderer)();
        },

        /**
        * Returns the registered renderer for a given xtype
        * @param {String} xtype The component xtype to find a renderer for
        * @return {Object/undefined} The renderer instance for this xtype, or null if not found
        */
        getRenderer: function (xtype) {
            return this.renderers[xtype];
        },

        generateHtml: function (title, bodyMaster, cssFile) {
            var snippets = ['<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',
      '<html>',
        '<head>',
          '<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />',
        (cssFile ? '<link href="' + cssFile + '" rel="stylesheet" type="text/css" media="screen,print" />' : ''),
          '<title>' + title + '</title>',
        '</head>',
        '<body>',
         (bodyMaster || ''),
        '</body>',
      '</html>'];
            return snippets.join('');
        },

        print: function (title, body, components, cssFile) {
            var me = this;
            var html = this.generateHtml(title, body, cssFile);

            if (Ext.isObject(components)) {
                for (item in components) {
                    var cmpHtml;
                    if (Ext.isString(components[item]) || Ext.isNumber(components[item]))
                        cmpHtml = components[item];
                    else
                        cmpHtml = me.renderCmp(components[item]);
                    reg = new RegExp("\\{" + item + "\\}", "gm");
                    html = html.replace(reg, cmpHtml);
                }
            }

            var win = window.open('', '_new');

            win.document.write(html);
            win.document.close();

            win.print();
            //win.close();
        },

        renderCmp: function (component) {
            var xtypes = component.getXTypes().split('/');

            //iterate backwards over the xtypes of this component, dispatching to the most specific renderer
            for (var i = xtypes.length - 1; i >= 0; i--) {
                var xtype = xtypes[i],
            renderer = this.getRenderer(xtype);

                if (renderer != undefined) {
                    return renderer.generateHTML(component);
                    break;
                }
            }
            return '[component render undefined]';
        },

        /**
        * Prints the passed grid. Reflects on the grid's column model to build a table, and fills it using the store
        * @param {Ext.Component} component The component to print
        */
        print1: function (component) {
            var xtypes = component.getXTypes().split('/');

            //iterate backwards over the xtypes of this component, dispatching to the most specific renderer
            for (var i = xtypes.length - 1; i >= 0; i--) {
                var xtype = xtypes[i],
            renderer = this.getRenderer(xtype);

                if (renderer != undefined) {
                    renderer.print(component);
                    break;
                }
            }
        }
    };
} ();

/**
 * Override how getXTypes works so that it doesn't require that every single class has
 * an xtype registered for it.
 */
Ext.override(Ext.Component, {
  getXTypes : function(){
      var tc = this.constructor;
      if(!tc.xtypes){
          var c = [], sc = this;
          while(sc){ //was: while(sc && sc.constructor.xtype) {
            var xtype = sc.constructor.xtype;
            if (xtype != undefined) c.unshift(xtype);
            
            sc = sc.constructor.superclass;
          }
          tc.xtypeChain = c;
          tc.xtypes = c.join('/');
      }
      return tc.xtypes;
  }
});


Ext.onReady(function(){

    // create the Data Store
    var store = new Ext.data.Store({
        // load using HTTP
        url: 'test.xml',

        // the return will be XML, so lets set up a reader
        reader: new Ext.data.XmlReader({
               // records will have an "Item" tag
               record: 'item',
               id: 'id'
           }, [
               // set up the fields mapping into the xml doc
               // The first needs mapping, the others are very basic
                //{name: 'Author', mapping: 'ItemAttributes > Author'},
               //'Title', 'Manufacturer', 'ProductGroup'
				{name: 'id', mapping: 'ItemAttributes > id'},				
               	'fscPeriod', 'accountCode', 'actualAmount','budgetAmount', 'description', 'period'
           ])
    });

    // create the grid
    var grid = new Ext.grid.GridPanel({
        store: store,
        columns: [
			//{header: "id", width: 120, dataIndex: 'id', sortable: true},
			{header: "fscPeriod", width: 120, dataIndex: 'fscPeriod', sortable: true},
			{header: "accountCode", width: 120, dataIndex: 'accountCode', sortable: true},
			{header: "actualAmount", width: 120, dataIndex: 'actualAmount', sortable: true},
			{header: "budgetAmount", width: 120, dataIndex: 'budgetAmount', sortable: true},
			{header: "description", width: 120, dataIndex: 'description', sortable: true},
			{header: "period", width: 120, dataIndex: 'period', sortable: true}
        ],
        renderTo:'example-grid',
        width:800,
        height:500
    });

    store.load();
});




/// <reference path="../references/jquery-1.4.1.js" />
/// <reference path="ext-all-budget.js" />
/// <reference path="../references/ext-jquery-adapter.js" />
/// <reference path="../references/weblight4extjs.js" />



WebLight.namespace('Bud.page');

Bud.page.budgetsummaryPage = WebLight.extend(Bud.page.BudgetPage, {
    title: 'Budget Summary',
	//html: '<% Import path="markup.htm" %>',
    html: _builtInTemplate_99c0f840[4],
	
  	_budgetsummaryStore: null,
	_budgetsummaryStore1: null,
	_budgetsummaryStore2: null,
	_budgetsummaryStore3: null,

 

	
	 createChildControls: function () {
        this._budgetsummaryStore = new Ext.data.ArrayStore({
            fields: ['field1', 'field2', 'field3', 'field4', 'field5', 'field6', 'field7', 'field8', 'field9', 'field10']
        });
        this._budgetsummaryStore1 = new Ext.data.ArrayStore({
            fields: ['field1', 'field2', 'field3', 'field4', 'field5', 'field6', 'field7', 'field8', 'field9', 'field10', 'field11', 'field12', 'field13', 'field14', 'field15']
        });
		 this._budgetsummaryStore2 = new Ext.data.ArrayStore({
            fields: ['field1', 'field2', 'field3', 'field4', 'field5', 'field6', 'field7', 'field8', 'field9', 'field10', 'field11', 'field12', 'field13', 'field14', 'field15']
        });
		 this._budgetsummaryStore3 = new Ext.data.ArrayStore({
            fields: ['field1', 'field2', 'field3', 'field4', 'field5', 'field6', 'field7', 'field8', 'field9', 'field10', 'field11', 'field12', 'field13', 'field14', 'field15']
        });

        var staffingSelect = new Ext.Panel({
            header: false,
            border: false,
            autoHeight: true,
            bodyStyle: 'border-bottom:2px solid #336600;margin:10px 0;padding:10px;',
            items: [
                    { xtype: 'radiogroup', columns: 4, items: [
                        { boxLabel: 'Budget Summary Period From 1 to 4', name: 'cb-custwidth', inputValue: 1, checked: true },
						{ boxLabel: 'Budget Summary Period From 5 to 8', name: 'cb-custwidth', inputValue: 1, checked: true },
						{ boxLabel: 'Budget Summary Period From 9 to 12', name: 'cb-custwidth', inputValue: 1, checked: true },
                        { boxLabel: 'Budget Summary Period 13', name: 'cb-custwidth', inputValue: 2 }
                    ],
                        listeners: {
                            'change': function (obj, checked) {
                                var v = checked.getRawValue();
                                switch (v) {
                                    case '1':
                                        panel1.show();
                                        panel2.hide();
										panel3.hide();
										panel4.hide();
                                        break;
                                    case '2':
                                        panel1.hide();
                                        panel2.show();
										panel3.hide();
										panel4.hide();
                                        break;
									case '3':
                                        panel1.hide();
                                        panel2.hide();
										panel3.show();
										panel4.hide();
                                        break;
									case '4':
                                        panel1.hide();
                                        panel2.hide();
										panel3.hide();
										panel4.show();
                                        break;
                                }
                            }
                        }
                    }]
        });
		
		   var group = new Ext.ux.grid.ColumnHeaderGroup({
            rows: [[
                   { header: '', colspan: 2 },
                    { header: 'Period 1', colspan: 2, align: 'center' },
                    { header: 'Period 2', colspan: 2, align: 'center' },
                    { header: 'Period 3', colspan: 2, align: 'center' },
					{ header: 'Period 4', colspan: 2, align: 'center' }
					
					]
            ]
        });
		
        var panel1 = new Ext.Panel({
            header: false,
            border: false,
            autoHeight: true, 
			title: 'Budget Summary Period From 1 to 4',
            items: [
                new WebLight.grid.GridPanel({
                    ctCls: 'ux-grid-1',
                    store: this._budgetsummaryStore,
                    autoHeight: true,
                    viewConfig: {
                        forceFit: true
                    },
                    cm: new Ext.grid.ColumnModel({
                        defaults: { sortable: false },
                        columns: [
                          	{ header: '<center>' + 'Item(s)' + '</center>', width: 150 },
		                    { header: '&nbsp;' },
		                    { header: '<center>' + 'Actuals' + '</center>', width: 60, css: 'text-align:right;color:#43A643;font-weight:bold;' },
		                    { header: '<center>' + 'Budget' + '</center>', width: 60,  css: 'text-align:right;color:#43A643;font-weight:bold;' },
		                    { header: '<center>' + 'Actuals' + '</center>', width: 60, css:  'text-align:right;color:#43A643;font-weight:bold;'},
		                    { header: '<center>' + 'Budget' + '</center>', width: 60,  css:  'text-align:right;color:#43A643;font-weight:bold;' },
		                    { header: '<center>' + 'Actuals' + '</center>', width: 60, css:  'text-align:right;color:#43A643;font-weight:bold;'},
		                    { header: '<center>' + 'Budget' + '</center>', width: 60,  css:  'text-align:right;color:#43A643;font-weight:bold;'},
							{ header: '<center>' + 'Actuals' + '</center>', width: 60, css:  'text-align:right;color:#43A643;font-weight:bold;'},
		                    { header: '<center>' + 'Budget' + '</center>', width: 60,  css:  'text-align:right;color:#43A643;font-weight:bold;'}

                        ]
                    }),
					plugins: group
                })
					
            ]
		
        });
		
		var group = new Ext.ux.grid.ColumnHeaderGroup({
            rows: [[
                   { header: '', colspan: 2 },
                    { header: 'Period 5', colspan: 2, align: 'center' },
                    { header: 'Period 6', colspan: 2, align: 'center' },
                    { header: 'Period 7', colspan: 2, align: 'center' },
					{ header: 'Period 8', colspan: 2, align: 'center' }
					
					]
            ]
        });
        var panel2 = new Ext.Panel({
            header: false,
            border: false,
            autoHeight: true, 
			title: 'Budget Summary Period From 5 to 8',
            //hidden:true,
            items: [
                new WebLight.grid.GridPanel({
                    ctCls: 'ux-grid-1',
                    store: this._budgetsummaryStore1,
                    autoHeight: true,
                    viewConfig: {
                        forceFit: true
                    },
                    cm: new Ext.grid.ColumnModel({
                        defaults: { sortable: false },
                        columns: [
                            { header: '<center>' + 'Item(s)' + '</center>', width: 150 },
		                    { header: '&nbsp;' },
		                    { header: '<center>' + 'Actuals' + '</center>', width: 60, css:  'text-align:right;color:#43A643;font-weight:bold;'},
		                    { header: '<center>' + 'Budget' + '</center>', width: 60,  css:  'text-align:right;color:#43A643;font-weight:bold;'},
		                    { header: '<center>' + 'Actuals' + '</center>', width: 60, css:  'text-align:right;color:#43A643;font-weight:bold;'},
		                    { header: '<center>' + 'Budget' + '</center>', width: 60,  css:  'text-align:right;color:#43A643;font-weight:bold;'},
		                    { header: '<center>' + 'Actuals' + '</center>', width: 60, css:  'text-align:right;color:#43A643;font-weight:bold;'},
		                    { header: '<center>' + 'Budget' + '</center>', width: 60,  css:  'text-align:right;color:#43A643;font-weight:bold;'},
							{ header: '<center>' + 'Actuals' + '</center>', width: 60, css:  'text-align:right;color:#43A643;font-weight:bold;'},
		                    { header: '<center>' + 'Budget' + '</center>', width: 60,  css:  'text-align:right;color:#43A643;font-weight:bold;'}

                        ]
                    }),
					plugins: group
                })
            ]
        });
		
		
		var group = new Ext.ux.grid.ColumnHeaderGroup({
            rows: [[
                   { header: '', colspan: 2 },
                    { header: 'Period 9', colspan: 2, align: 'center' },
                    { header: 'Period 10', colspan: 2, align: 'center' },
                    { header: 'Period 11', colspan: 2, align: 'center' },
					{ header: 'Period 12', colspan: 2, align: 'center' }
					
					]
            ]
        });
		var panel3 = new Ext.Panel({
            header: false,
            border: false,
            autoHeight: true, 
			title: 'Budget Summary Period From 9 to 12',
            items: [
                new WebLight.grid.GridPanel({
                    ctCls: 'ux-grid-1',
                    store: this._budgetsummaryStore2,
                    autoHeight: true,
                    viewConfig: {
                        forceFit: true
                    },
                    cm: new Ext.grid.ColumnModel({
                        defaults: { sortable: false },
                        columns: [
                          	{ header: '<center>' + 'Item(s)' + '</center>', width: 150 },
		                    { header: '&nbsp;' },
		                    { header: '<center>' + 'Actuals' + '</center>', width: 60, css:  'text-align:right;color:#43A643;font-weight:bold;'},
		                    { header: '<center>' + 'Budget' + '</center>', width: 60,  css:  'text-align:right;color:#43A643;font-weight:bold;'},
		                    { header: '<center>' + 'Actuals' + '</center>', width: 60, css:  'text-align:right;color:#43A643;font-weight:bold;'},
		                    { header: '<center>' + 'Budget' + '</center>', width: 60,  css:  'text-align:right;color:#43A643;font-weight:bold;'},
		                    { header: '<center>' + 'Actuals' + '</center>', width: 60, css:  'text-align:right;color:#43A643;font-weight:bold;'},
		                    { header: '<center>' + 'Budget' + '</center>', width: 60,  css:  'text-align:right;color:#43A643;font-weight:bold;'},
							{ header: '<center>' + 'Actuals' + '</center>', width: 60, css:  'text-align:right;color:#43A643;font-weight:bold;'},
		                    { header: '<center>' + 'Budget' + '</center>', width: 60,  css:  'text-align:right;color:#43A643;font-weight:bold;'}

                        ]
                    }),
					plugins: group
                })
            ]
        });
		
		var group = new Ext.ux.grid.ColumnHeaderGroup({
            rows: [[
                   { header: '', colspan: 2 },
                    { header: 'Period 13', colspan: 2, align: 'center' },
                    { header: '', colspan: 2, align: 'center' },
                    { header: 'YTD thru Period 6', colspan: 2, align: 'center' },
					{ header: '% of', colspan: 2, align: 'center' }
					
					]
            ]
        });
		var panel4 = new Ext.Panel({
            header: false,
            border: false,
            autoHeight: true, 
			title: 'Budget Summary Period 13',
            items: [
                new WebLight.grid.GridPanel({
                    ctCls: 'ux-grid-1',
                    store: this._budgetsummaryStore3,
                    autoHeight: true,
                    viewConfig: {
                        forceFit: true
                    },
                    cm: new Ext.grid.ColumnModel({
                        defaults: { sortable: false },
                        columns: [
                          	{ header: '<center>' + 'Item(s)' + '</center>', width: 150 },
		                    { header: '&nbsp;' },
		                    { header: '<center>' + 'Actuals' + '</center>', width: 60, css:  'text-align:right;color:#43A643;font-weight:bold;'},
		                    { header: '<center>' + 'Budget' + '</center>', width: 60, css:  'text-align:right;color:#43A643;font-weight:bold;'},
		                    { header: '<center>' + '' + '</center>', width: 60, css:  'text-align:right;color:#43A643;font-weight:bold;'},
		                    { header: '<center>' + '' + '</center>', width: 60, css:  'text-align:right;color:#43A643;font-weight:bold;'},
		                    { header: '<center>' + 'Actuals' + '</center>', width: 60, css:  'text-align:right;color:#43A643;font-weight:bold;'},
		                    { header: '<center>' + 'Budget' + '</center>', width: 60, css:  'text-align:right;color:#43A643;font-weight:bold;'},
							{ header: '<center>' + 'Actuals' + '</center>', width: 60, css:  'text-align:right;color:#43A643;font-weight:bold;'},
		                    { header: '<center>' + 'Budget' + '</center>', width: 60, css:  'text-align:right;color:#43A643;font-weight:bold;'}

                        ]
                    }),
					plugins: group
                })
            ]
        });

		/*
this._budgetsummaryLoadButton = Ext.create({ xtype: 'button', ctCls: 'ux-button-1', text: 'Load', width: 80 });
		
*/
        var tabs = new Ext.TabPanel({
            activeTab: 0,
            border: false,
            ctCls: 'ux-tab-1',
            autoHeight: true,
            items: [panel1, panel2, panel3, panel4]
        });
		
        this.addChildControl(tabs, 'container');
        Bud.page.budgetsummaryPage.superclass.createChildControls.call(this);
		
    },
	
	dataBind: function () {
        this._budgetsummaryStore.loadData(Bdg.store.Period1to5);
        this._budgetsummaryStore1.loadData(Bdg.store.Period5to8);
		this._budgetsummaryStore2.loadData(Bdg.store.Period8to12);
		this._budgetsummaryStore3.loadData(Bdg.store.Period13);
        Bud.page.budgetsummaryPage.superclass.dataBind.call(this);
    }

});


WebLight.PageMgr.registerType('budgetsummaryRpt', Bud.page.budgetsummaryPage);

